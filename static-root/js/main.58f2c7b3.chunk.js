(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{12:function(e,t,n){},14:function(e,t,n){"use strict";n.r(t);var o=n(1),s=n.n(o),c=n(6),a=n.n(c),r=(n(12),n(2)),i=n(7),l=n(0);function u(e,t,n,o){var s;o&&(s=JSON.stringify(o));var c=new XMLHttpRequest;c.responseType="json",c.open(e,t),c.setRequestHeader("Content-Type","application/json"),c.onload=function(){200===c.status||201===c.status?n(c.response,c.status):console.log("some error",c.status,c.response)},c.onerror=function(e){n({message:"Error"},400)},c.send(s)}function d(){var e=Object(o.useState)([]),t=Object(r.a)(e,2),n=t[0],c=t[1],a=Object(o.useState)(null),d=Object(r.a)(a,2),b=d[0],p=d[1];return console.log(n),Object(o.useEffect)((function(){u("GET","http://localhost:8000/api/posts",(function(e,t){p(e.next),c(e.results)}))}),[]),Object(l.jsxs)(s.a.Fragment,{children:[n.map((function(e){return Object(l.jsx)(j,{post:e,detail:!1},e.id)})),null!==b&&Object(l.jsx)("button",{className:"btn btn-primary",onClick:function(){if(null!==b){u("GET",b,(function(e,t){if(200===t){p(e.next);var o=Object(i.a)(n).concat(e.results);c(o)}else alert("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435")}))}},children:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0435\u0449\u0435"})]})}function b(e){var t=e.post,n=Object(o.useState)(""),c=Object(r.a)(n,2),a=c[0],i=c[1],d=Object(o.useState)("newest"),b=Object(r.a)(d,2),j=b[0],p=b[1],h=Object(o.useState)([t.comments]),O=Object(r.a)(h,2),m=O[0],f=O[1];function g(e,t){201===t||200===t?f(e.comments):console.log(t,"\u041e\u0448\u0438\u0431\u043a\u0430")}function v(e){p(e.target.value),console.log("btn value is ",e.target.value),console.log("sortType is ",j),u("POST","http://localhost:8000/api/posts/".concat(t.id,"/sort"),g,{sortType:e.target.value})}function x(e){console.log(e.target.value),alert("\u0442\u043e\u0447\u043d\u043e \u0443\u0434\u0430\u043b\u0438\u0442\u044c?"),u("DELETE","http://localhost:8000/api/posts/".concat(t.id,"/").concat(e.target.value),g,{sortType:j})}return Object(o.useEffect)((function(){f(t.comments),console.log("on hook ",j)}),[f,t.comments,j]),Object(l.jsxs)(s.a.Fragment,{children:[Object(l.jsxs)("div",{className:"btn-group",role:"group","aria-label":"Basic radio toggle button group",children:[Object(l.jsx)("input",{type:"radio",className:"btn-check",name:"btnradio",id:"btnradio1",value:"newest",onChange:v,checked:"newest"===j}),Object(l.jsx)("label",{className:"btn btn-outline-primary",for:"btnradio1",children:"\u0421\u043d\u0430\u0447\u0430\u043b\u0430 \u043d\u043e\u0432\u044b\u0435"}),Object(l.jsx)("input",{type:"radio",className:"btn-check",name:"btnradio",id:"btnradio2",value:"old",onChange:v,checked:"old"===j}),Object(l.jsx)("label",{className:"btn btn-outline-primary",for:"btnradio2",children:"\u0421\u043d\u0430\u0447\u0430\u043b\u0430 \u0441\u0442\u0430\u0440\u044b\u0435"})]}),Object(l.jsx)("div",{children:m.map((function(e){return Object(l.jsxs)(s.a.Fragment,{children:[Object(l.jsx)("div",{children:e.user}),Object(l.jsx)("div",{children:e.text}),Object(l.jsx)("div",{children:e.comment_date}),e.my_comment?Object(l.jsx)("button",{className:"btn btn-danger",value:e.id,onClick:x,children:"\u0443\u0434\u0430\u043b\u0438\u0442\u044c"}):null]},e.id)}))}),Object(l.jsxs)("form",{onSubmit:function(e){e.preventDefault(),u("POST","http://localhost:8000/api/posts/send_comment",g,{post:t.id,text:a,sortType:j}),i("")},children:[Object(l.jsx)("textarea",{className:"form-control",resize:"none",style:{weight:"100%",resize:"none"},placeholder:"\u041e\u0441\u0442\u0430\u0432\u044c\u0442\u0435 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439 \u0437\u0434\u0435\u0441\u044c",id:"floatingTextarea2",value:a,onChange:function(e){return i(e.target.value)},required:!0,maxLength:"100"}),Object(l.jsx)("button",{type:"submit",className:"btn btn-success",children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"})]})]})}function j(e){var t=e.post,n=e.detail;return console.log(t),Object(l.jsx)(s.a.Fragment,{children:Object(l.jsxs)("div",{className:"container my-5 w-50 border border-dark",children:[!1===n?Object(l.jsx)("header",{className:"h2",onClick:function(){window.location.href="/".concat(t.id)},children:t.title}):Object(l.jsx)("header",{className:"h2",children:t.title}),Object(l.jsxs)("div",{children:["\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f: ",t.category]}),Object(l.jsx)("div",{className:"text-center",children:Object(l.jsx)("img",{src:t.image_url,height:"60%",width:"60%",alt:t.title})}),Object(l.jsx)(p,{post:t}),Object(l.jsx)("div",{children:!0===n?Object(l.jsx)("div",{children:"asdasd"}):""}),Object(l.jsxs)("footer",{children:[Object(l.jsxs)("div",{children:["\u0410\u0432\u0442\u043e\u0440: ",t.author]}),Object(l.jsxs)("div",{children:["\u0414\u0430\u0442\u0430 \u043f\u0443\u0431\u043b\u0438\u043a\u0430\u0446\u0438\u0438: ",t.pub_date]}),Object(l.jsxs)("div",{children:["\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438: ",t.comments_quantity]})]}),Object(l.jsx)("div",{children:!0===n?Object(l.jsx)(b,{post:t},t.id):Object(l.jsx)("div",{children:t.comments_quantity})})]})})}function p(e){var t=e.post,n=Object(o.useState)(t.upvotes),c=Object(r.a)(n,2),a=c[0],i=c[1],u=Object(o.useState)(t.downvotes),d=Object(r.a)(u,2),b=d[0],j=d[1],p=Object(o.useState)(t.rating),h=Object(r.a)(p,2),O=h[0],m=h[1],f=Object(o.useState)("UP"===t.vote),g=Object(r.a)(f,2),v=g[0],x=g[1],w=Object(o.useState)("DOWN"===t.vote),y=Object(r.a)(w,2),N=y[0],S=y[1],T=!1===v?"btn btn-outline-primary":"btn btn-primary",k=!1===N?"btn btn-outline-danger":"btn btn-danger";function C(e){var n=JSON.stringify({id:t.id,vote_type:e}),o=new XMLHttpRequest;o.responseType="json",o.open("POST","http://localhost:8000/api/post/rate/"),o.setRequestHeader("Content-Type","application/json"),"upvote"===e?(o.onload=function(e){200===o.status?(console.log(o.response,o.status,o.response.rating),x(!0),m(o.response.rating),i(o.response.upvotes),S(!1),j(o.response.downvotes)):console.log("sorry")},o.send(n)):"downvote"===e?(o.onload=function(e){200===o.status?(console.log(o.response,o.status,o.response.rating),S(!0),m(o.response.rating),i(o.response.upvotes),x(!1),j(o.response.downvotes)):console.log("sorry")},o.send(n)):"delupvote"===e?(o.onload=function(e){200===o.status?(console.log(o.response,o.status,o.response.rating),x(!1),m(o.response.rating),i(o.response.upvotes),j(o.response.downvotes)):console.log("sorry")},o.send(n)):"deldownvote"===e&&(o.onload=function(e){200===o.status?(console.log(o.response,o.status,o.response.rating),S(!1),m(o.response.rating),j(o.response.downvotes),i(o.response.upvotes)):console.log("sorry")},o.send(n))}return Object(l.jsxs)(s.a.Fragment,{children:[O,Object(l.jsxs)("button",{className:T,onClick:function(){return C(!1===v?"upvote":"delupvote")},children:[a," \u0410\u043f\u0432\u043e\u0443\u0442"]}),Object(l.jsxs)("button",{className:k,onClick:function(){return C(!1===N?"downvote":"deldownvote")},children:[b," \u0414\u0430\u0443\u043d\u0432\u043e\u0443\u0442"]})]})}function h(){var e=Object(o.useState)([]),t=Object(r.a)(e,2),n=t[0],c=t[1],a=Object(o.useState)(!1),i=Object(r.a)(a,2),d=i[0],b=i[1],p=window.location.pathname;return console.log(p),Object(o.useEffect)((function(){u("GET","http://localhost:8000/api/posts".concat(p),(function(e,t){c(e),b(!0)}))}),[p]),Object(l.jsxs)(s.a.Fragment,{children:[d?Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(m,{}),Object(l.jsx)("button",{className:"btn btn-primary",onClick:O,children:"\u041d\u0430\u0437\u0430\u0434"}),Object(l.jsx)(j,{post:n,detail:!0},n.id)]}):null," "]})}function O(){window.history.back()}function m(){var e=Object(o.useState)(!1),t=Object(r.a)(e,2),n=t[0],s=t[1];function c(){window.pageYOffset>300?s(!0):s(!1)}return Object(o.useEffect)((function(){window.addEventListener("scroll",c)}),[]),Object(l.jsx)("div",{className:"bi bi-arrow-up-square-fill",style:{position:"sticky",top:"10%",marginLeft:"80%"},children:n&&Object(l.jsxs)("button",{className:"btn btn-outline-info",onClick:function(){window.scrollTo({top:0,behavior:"smooth"})},children:[Object(l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"50",height:"50",fill:"currentColor",class:"bi bi-arrow-up-square-fill",viewBox:"0 -2 20 20",children:Object(l.jsx)("path",{d:"M2 16a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2zm6.5-4.5V5.707l2.146 2.147a.5.5 0 0 0 .708-.708l-3-3a.5.5 0 0 0-.708 0l-3 3a.5.5 0 1 0 .708.708L7.5 5.707V11.5a.5.5 0 0 0 1 0z"})}),"\u041d\u0430\u0432\u0435\u0440\u0445"]})})}var f=function(){if("/"===window.location.pathname)return Object(l.jsx)(d,{})},g=function(){if(window.location.pathname.match(/\d+/))return console.log(window.location.pathname,window.location.pathname.match(/\d+/)),Object(l.jsx)(h,{})};var v=function(){return Object(l.jsxs)(l.Fragment,{children:[f(),g()]})},x=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,15)).then((function(t){var n=t.getCLS,o=t.getFID,s=t.getFCP,c=t.getLCP,a=t.getTTFB;n(e),o(e),s(e),c(e),a(e)}))};a.a.render(Object(l.jsx)(s.a.StrictMode,{children:Object(l.jsx)(v,{})}),document.getElementById("root")),x()}},[[14,1,2]]]);
//# sourceMappingURL=main.58f2c7b3.chunk.js.map